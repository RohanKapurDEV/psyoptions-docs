<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.72">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="PsyOptions Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="PsyOptions Blog Atom Feed"><title data-react-helmet="true">American Protocol V1 How It Works | PsyOptions</title><meta data-react-helmet="true" property="og:url" content="https://mithraiclabs.github.io/american-v1/how-it-works"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="American Protocol V1 How It Works | PsyOptions"><meta data-react-helmet="true" name="description" content="To truly understand how the protocol and platform works, one needs to understand what&#x27;s"><meta data-react-helmet="true" property="og:description" content="To truly understand how the protocol and platform works, one needs to understand what&#x27;s"><link data-react-helmet="true" rel="shortcut icon" href="/img/PsyOps.svg"><link data-react-helmet="true" rel="canonical" href="https://mithraiclabs.github.io/american-v1/how-it-works"><link data-react-helmet="true" rel="alternate" href="https://mithraiclabs.github.io/american-v1/how-it-works" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://mithraiclabs.github.io/fr/american-v1/how-it-works" hreflang="fr"><link data-react-helmet="true" rel="alternate" href="https://mithraiclabs.github.io/zh/american-v1/how-it-works" hreflang="zh"><link data-react-helmet="true" rel="alternate" href="https://mithraiclabs.github.io/american-v1/how-it-works" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.849ef427.css">
<link rel="preload" href="/assets/js/styles.e3457dc0.js" as="script">
<link rel="preload" href="/assets/js/runtime~main.5c99fd2f.js" as="script">
<link rel="preload" href="/assets/js/main.df9511ad.js" as="script">
<link rel="preload" href="/assets/js/1.5ae9c7c2.js" as="script">
<link rel="preload" href="/assets/js/2.6c108b95.js" as="script">
<link rel="preload" href="/assets/js/25.d1ef8f02.js" as="script">
<link rel="preload" href="/assets/js/935f2afb.935df6f2.js" as="script">
<link rel="preload" href="/assets/js/17896441.88d36895.js" as="script">
<link rel="preload" href="/assets/js/76183543.f7a92163.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/PsyOps.svg" alt="PsyOptions logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/PsyOps.svg" alt="PsyOptions logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">PsyOptions</strong></a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a href="#" class="navbar__item navbar__link"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>en</span></span></a><ul class="dropdown__menu"><li><a href="/american-v1/how-it-works" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">en</a></li><li><a href="/fr/american-v1/how-it-works" target="_self" rel="noopener noreferrer" class="dropdown__link">fr</a></li><li><a href="/zh/american-v1/how-it-works" target="_self" rel="noopener noreferrer" class="dropdown__link">zh</a></li></ul></div><a href="https://medium.com/psyoptions" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a><a href="https://psyoptions.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">App</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/mithraiclabs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--checked react-toggle--disabled displayOnlyInLargeViewport_GrZ2"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" checked="" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/PsyOps.svg" alt="PsyOptions logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/PsyOps.svg" alt="PsyOptions logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">PsyOptions</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a href="#" role="button" class="menu__link menu__link--sublist"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>Languages</span></span></a><ul class="menu__list"><li class="menu__list-item"><a href="/american-v1/how-it-works" target="_self" rel="noopener noreferrer" class="menu__link dropdown__link--active">en</a></li><li class="menu__list-item"><a href="/fr/american-v1/how-it-works" target="_self" rel="noopener noreferrer" class="menu__link">fr</a></li><li class="menu__list-item"><a href="/zh/american-v1/how-it-works" target="_self" rel="noopener noreferrer" class="menu__link">zh</a></li></ul></li><li class="menu__list-item"><a href="https://medium.com/psyoptions" target="_blank" rel="noopener noreferrer" class="menu__link">Blog</a></li><li class="menu__list-item"><a href="https://psyoptions.io/" target="_blank" rel="noopener noreferrer" class="menu__link">App</a></li><li class="menu__list-item"><a href="https://github.com/mithraiclabs" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper main-docs-wrapper"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/mission">Mission</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/glossary">Glossary</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/options-strategies">Options Strategies</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Architecture Design</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture/option-types">Option types</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture/call-put">Call vs Put</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Amercian Style Protocol (V1)</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/american-v1/how-it-works">How It Works</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Program Integration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/program-integration/quick-start">Quick Start</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Clients</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/client-integration/overview">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">JavaScript</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/client-integration/javascript">API</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Rust</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/client-integration/rust/quick-start">Quick Start</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Designers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fonts-and-styles">Fonts and Styles</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Devnet Testing</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/devnet-testing/setup-wallet">Wallet Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/devnet-testing/what-to-test">What to Test</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/devnet-testing/beta-testing">Beta Testing</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">PSY Token</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/psy-token">token-incentives</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/faq">FAQ</a></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">American Protocol V1 How It Works</h1></header><div class="markdown"><p>To truly understand how the protocol and platform works, one needs to understand what&#x27;s
happening under the hood. Here we will do our best to break down each interaction an entity
may make with the protocol and what&#x27;s happening.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="initialize-new-options-market"></a>Initialize new options market<a class="hash-link" href="#initialize-new-options-market" title="Direct link to heading">#</a></h2><p><img alt="initialize market" src="/assets/images/initialize_market_page-856da4b58eade2e35e691ca0804c7f2a.png"></p><p>The protocol is designed to be a primitive, so it makes very little assumptions about options,
how they should be traded, priced, etc. The protocol itself, also makes no assumptions on what
assets should have options and which should not. It has been built with various use cases in
mind, like writing contracts on NFTs, tokenized property deeds, tokenized stocks...anything
that can be represented as an SPL Token can have an option market. Will there be liquidity
on those markets is a topic for another discussion ;).</p><p>Option markets themselves are completely open and permissionless. If there are a pair of assets
you want to write options on, you can create that market! To do so you need to use the
<code>InitializeMarket</code> instruction. Each market is goverened by specific parameters that determine
its fungibility. Those parameters include:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly Rust"><div tabindex="0" class="prism-code language-Rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pub struct OptionMarket {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /// The SPL Token Address that is held in the program&#x27;s pool when an option is written</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pub underlying_asset_mint: Pubkey,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /// The SPL Token Address that denominates the strike price</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pub quote_asset_mint: Pubkey,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /// The amount of the **underlying asset** that derives a single option</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pub underlying_amount_per_contract: u64,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /// The amount of **quote asset** that must be transfered when an option is exercised</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pub quote_amount_per_contract: u64,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /// The Unix timestamp **in seconds** at which the contracts in this market expire</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pub expiration_unix_timestamp: UnixTimestamp,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>It is important to note that the protocol uses deterministic addressing of markets, based on
the unique parameters, so there can never be two of the exact same market. This was a concious
decision of V1 to reduce the chance of fragmented liquidity. </p><p>Creating a new market is extremely cheap and easy! When a new market is initialized a few things
happen. The most important are the creation of the <strong>Underlying Asset Pool</strong> and the
<strong>Quote Asset Pool</strong> for that market. These pools are unique to and owned by each individual
market. When someone mints an option contract, their collateral is stored in these pools, more
on that next.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="minting-an-option"></a>Minting an option<a class="hash-link" href="#minting-an-option" title="Direct link to heading">#</a></h2><p>Without a doubt, the most important and widely used instruction of the protocol. When you want to
mint a contract for a given market you need the <code>MintCoveredCall</code> instruction. It is
<strong>extremely important to note</strong> that although this instruction contains the phrase <em>Covered Call</em>
in the V1 protocol, all contracts can be considered covered calls. PUTs are simply the reciprical
of the a CALL, and all of V1&#x27;s markets require 100% collateral upfront. More can be read
<a href="/architecture/call-put">here</a>.</p><p>To mint a contract, the contract writer must put up 100% of the <code>underlying_amount_per_contract</code>
plus a 5bps minting fee. This small fee will go to the PsyOptions treasury and will be adjustable (or removable) via
governance. So the total underlying assets required to mint 1 contract is:</p><p><code>underlying_assets_required = underlying_amount_per_contract + (underlying_amount_per_contract * 0.0005)</code></p><p>These unserlying assets are then stored in the option markets&#x27; <em>Underlying Asset Pool</em>. If
the transfer to the pool succeeds (i.e. enough underlying was posted), then the protocol
mints the user 2 tokens, the <strong>OptionToken</strong> and the <strong>WriterToken</strong>. </p><p>The <strong>OptionToken is the actual contract</strong>, which gives the holder <em>the right but not
the obligation to swap the quote assets for the underlying assets at the agreed upon
strike price</em>. The OptionToken is an SPL Token, so it can be transfered or traded on
any venue that has SPL Token support. </p><p>The <strong>WriterToken</strong> denotes the holder is short the option or wrote the contract. Lets
break that statement down into more logical terms. Given this is an American style contract
the OptionToken holder can exercise at any point in time prior to expiration. So at any point
(pre or post expiration) the WriterToken gives the holder the ability to claim the
<code>quote_amount_per_contract</code> should anyone exercise and the Quote Asset Pool contains
enough of a balance. Post expiration, the WriterToken gives the holder the ability to
claim the <code>underlying_amount_per_contract</code> back from the Underlying Asset Pool.</p><p>So to generate yield from writing a contract, you would sell the OptionToken.
That could be done OTC and transfered, on a Seurm market, or any other venue that creates
and exchange for a market&#x27;s SPLs. </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="exercising-a-contract"></a>Exercising a contract<a class="hash-link" href="#exercising-a-contract" title="Direct link to heading">#</a></h2><p>With the OptionToken we have the ability to exercise the contract with the use of the
<code>ExerciseCoveredCall</code> instruction. To exercise we must post the OptionToken held and
the <code>quote_amount_per_contract</code> plus a 5bps fee. This small fee will got to the PsyOptions
treasury and will be adjustable (or removable) via governance. So the total quote
asset that must be posted is </p><p><code>quote_assets_required = quote_amount_per_contract + (quote_amount_per_contract * 0.0005)</code></p><p>With the correct amount posted, the protocol burns the OptionToken, transfers
<code>quote_amount_per_contract</code> to the market&#x27;s Quote Asset Pool, and transfers
<code>underlying_amount_per_contract</code> to the exerciser&#x27;s address. </p><p>Now that someone has exercised, we&#x27;ll cover how a contract writer can claim those assets.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="extracting-assets-from-an-exercised-contract"></a>Extracting assets from an exercised contract<a class="hash-link" href="#extracting-assets-from-an-exercised-contract" title="Direct link to heading">#</a></h2><p>Economic theories have proven that it is not beneficial to exercise a contract early. But
this is not TradFi. The composability of PsyOptions American V1 provides many use cases
outside of pure volatility trading, portfolio hedging, etc. where exercising early will
most certainly happen. Lets take protocol XYZ that is running a liquidity mining program
that incentivized new liquidity providers with At The Money (ATM) contracts that expire
in 10 years. As long as project XYZ continues to grow, these contract holders will most
cetainly exercise early. </p><p>Now when that early exercise occurs, the contract writer is able to claim the quote assets
as soon as they are available. To do so, the contract writer must use the
<code>ExchangeWriterTokenForQuote</code> instruction. The user must post the WriterToken. The
protocol will burn the WriterToken and transfer the <code>quote_amount_per_contract</code> to the
writer&#x27;s wallet. </p><p>A few items to note. First, this instruction can be called at any point in time, so long
as there are enough quote assets in the Quote Asset Pool. Second, this instruction acts
on a <strong>first come, first serve basis</strong>. All OptionTokens and WriterTokens for a given
market are respectively fungible (i.e. Any OptionToken is the same as another for the
given market. The same is true for the WriterToken.). So as soon as someone exercises an
OptionContract <strong>anyone holding a WriterToken for that market has a claim on the quote assets</strong>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="getting-your-underlying-back-after-expiration"></a>Getting your underlying back after expiration<a class="hash-link" href="#getting-your-underlying-back-after-expiration" title="Direct link to heading">#</a></h2><p>After expiration, a contract writer has a claim on their original underlying assets that they
posted to write the contract. <strong>Only after expiration</strong> can a WriterToken sent the protocol
to be burned in exchange for the <code>underlying_amount_per_contract</code>. This is done through the
<code>ClosePostExpiration</code> instruction.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="closing-a-position-pre-expiration"></a>Closing a position pre-expiration<a class="hash-link" href="#closing-a-position-pre-expiration" title="Direct link to heading">#</a></h2><p>What happens if you wrote too many contracts at once? Or your exposure has changed and you need
to close your position? This is where the <code>ClosePosition</code> instruction comes in. This instruction
<strong>requires you to have both the OptionToken and the WriterToken</strong>. At anypoint (pre or post
expiration) if a wallet calls this instruction with the correct token pair preset, it will
receive the <code>underlying_amount_per_contract</code>. The protocol checks and burns both tokens and
then transfersthe underlying assets from the pool to the wallet. </p><p>If you sold the OptionToken and would like to close your position, you will have to go to a venue
that trades/sells the correct OptionToken and purchase one there.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/mithraiclabs/psyoptions-docs/tree/master/docs/how-it-works.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/architecture/call-put"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Call vs Put</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/program-integration/quick-start"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Program Integration Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#initialize-new-options-market" class="table-of-contents__link">Initialize new options market</a></li><li><a href="#minting-an-option" class="table-of-contents__link">Minting an option</a></li><li><a href="#exercising-a-contract" class="table-of-contents__link">Exercising a contract</a></li><li><a href="#extracting-assets-from-an-exercised-contract" class="table-of-contents__link">Extracting assets from an exercised contract</a></li><li><a href="#getting-your-underlying-back-after-expiration" class="table-of-contents__link">Getting your underlying back after expiration</a></li><li><a href="#closing-a-position-pre-expiration" class="table-of-contents__link">Closing a position pre-expiration</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://t.co/T28cJeQvS7?amp=1" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/PsyOptions" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://t.co/SFP8AZH7kv?amp=1" target="_blank" rel="noopener noreferrer" class="footer__link-item">Telegram</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://medium.com/psyoptions" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://github.com/mithraiclabs" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 PsyOptions. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/styles.e3457dc0.js"></script>
<script src="/assets/js/runtime~main.5c99fd2f.js"></script>
<script src="/assets/js/main.df9511ad.js"></script>
<script src="/assets/js/1.5ae9c7c2.js"></script>
<script src="/assets/js/2.6c108b95.js"></script>
<script src="/assets/js/25.d1ef8f02.js"></script>
<script src="/assets/js/935f2afb.935df6f2.js"></script>
<script src="/assets/js/17896441.88d36895.js"></script>
<script src="/assets/js/76183543.f7a92163.js"></script>
</body>
</html>